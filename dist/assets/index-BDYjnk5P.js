(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(e){if(e.ep)return;e.ep=!0;const i=o(e);fetch(e.href,i)}})();const p="https://www.robotevents.com/api/v2",T="eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIzIiwianRpIjoiYWQyNzUwYjdmNzRmOGUyNzM5OGVkMDJlZDkyOWE4OWY1YTQzOWJkYTY5OGM4ZmY3OGY0ZTQ5ZGRiNzFkZmJjMmYzMzAyMTAzZDQ5YjFhMTQiLCJpYXQiOjE3NDI5OTUzNjcuMjI0MDU0MSwibmJmIjoxNzQyOTk1MzY3LjIyNDA1NiwiZXhwIjoyNjg5NjgwMTY3LjIxODQ5MTEsInN1YiI6IjQzOTAwIiwic2NvcGVzIjpbXX0.KmGKezP1cptZ63V5Qombw6UimQaueVhzxLtuzyNnkNcYSWCb0gPhq8va-ZJxH2YI-9sKdUlZapiLTDqdCibwNUr2UBPrh4svFT26UHH9xjvrdxkTdcnmycKCVVPE596Qp2J46x8SNhKxETUCMo-TjMNk7ciKR0QPRXHptxPZ_HYnUgomGcUMPNeJe-VcEmzeHYGdVGRdqCTZnihprg1z2yemGKnANEuqAtBFFDT2fbCZmWK1HiWI3GQrB4ZG5UsDK7xBfc6QIC0CG3N-y1LIoH02sjC_QcFt5W1bXwWdehtIt4-7YA2x5z7cb1pDd4YQ-Tr20sxZjWWfX03rzH5Ey3k93P25-TAchacyRjXX1_vQZCZWAEPQx2YLqLZPJsNeScsPb6TO4sDwluGou0BcvNhixliE18J5R-6b4A43DCtycRdepZiPun62MpKgHioInTnCeQ63VmT10981soCT9s_0lZs9juMAhBaT6V3eH0S0A-BZ-zhB9i3hUT2NiGSpPd3BYpHUHdRpxyRJ_BcIG9Y36TazhGPtdXhro1vn30yynK1-zsQkio5thzKBVZaIqO1i75p_x63KxX7P3XHeMpVP9x5KimC_dOUZWTXLJDRDX767iCyS9eF-AMFlUI-tHL6KmyN1UkT9T_UmYKLEgU9JC-Rylrf-BfaD3ygSGxA";async function m(t){try{const n=await fetch(t,{headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);return await n.json()}catch(n){return console.error(`Error fetching ${t}:`,n),null}}async function I(t){const n=`${p}/events/${t}`;return await m(n)}async function N(t){const n=`${p}/events/${t}/teams`,o=await m(n);return(o==null?void 0:o.data)||[]}async function b(t){const n=`${p}/events/${t}/skills`,o=await m(n);return(o==null?void 0:o.data)||[]}async function $(t,n){const o=`${p}/events/${t}/divisions/${n}/rankings`,s=await m(o);return(s==null?void 0:s.data)||[]}async function E(t={}){const n=new URL(`${p}/events`);Object.keys(t).forEach(s=>{Array.isArray(t[s])?t[s].forEach(e=>n.searchParams.append(`${s}[]`,e)):n.searchParams.append(s,t[s])});const o=await m(n.toString());return(o==null?void 0:o.data)||[]}let k=[],h=[],y=[],f=null;const D="1";function v(t){return Math.max(1,Math.ceil(t*.5))}async function C(){const t=new Date(Date.now()-6048e5).toISOString();return await E({start:t})}async function M(){const t=document.getElementById("eventDropdown"),n=await C();if(t.innerHTML="",n.length===0){t.innerHTML='<option value="">No events found</option>';return}const o=document.createElement("option");o.value="",o.textContent="Select an event...",t.appendChild(o),n.forEach(s=>{const e=document.createElement("option");e.value=s.id,e.textContent=`${s.name} (SKU: ${s.sku})`,t.appendChild(e)})}async function R(t){const n=await E({sku:[t]});return n.length>0?n[0]:(alert("No event found with the given SKU."),null)}window.addEventListener("DOMContentLoaded",()=>{M()});document.getElementById("eventDropdown").addEventListener("change",t=>{f=t.target.value,console.log("Selected event ID:",f)});document.getElementById("lookupBtn").addEventListener("click",async()=>{const t=document.getElementById("skuInput").value.trim();if(!t){alert("Please enter an Event SKU.");return}const n=await R(t);n&&(f=n.id,document.getElementById("eventDropdown").value=n.id,console.log("Event found by SKU:",n))});async function S(t){const n=await I(t);console.log("Event details:",n);const[o,s,e]=await Promise.all([N(t),b(t),$(t,D)]);k=o,h=s,y=e,console.log("Teams:",k),console.log("Skills Runs:",h),console.log("Qualifier Rankings:",y)}function L(){const t=[...y].sort((r,l)=>r.rank-l.rank),n=[...h].sort((r,l)=>r.rank-l.rank),o=v(t.length),s=v(n.length),e=new Map(t.map(r=>[r.team.id,r.rank])),i=new Map(n.map(r=>[r.team.id,r.rank])),a=[],g=[];k.forEach(r=>{let l=[];const u=e.get(r.id)||-1,d=i.get(r.id)||-1,c=h.find(w=>w.team.id===r.id)||{score:0,attempts:0,type:""};(u===-1||u>o)&&l.push(u===-1?"Not ranked in qualifier matches.":`Qualifier Ranking: ${u} (cutoff: ${o})`),(d===-1||d>s)&&l.push(d===-1?"Not ranked in skills matches.":`Skills Ranking: ${d} (cutoff: ${s})`),c.type==="programming"&&(c.score<=0||c.attempts===0)&&l.push(c.attempts===0?"No programming attempts.":`Programming score: ${c.score} (attempts: ${c.attempts})`),c.type==="driver"&&c.score<=0&&l.push("No driver score."),l.length===0?a.push({team:r,qualifierRank:u,qualifierCutoff:o,skillsRank:d,skillsCutoff:s,skillsData:c}):g.push({team:r,qualifierRank:u,qualifierCutoff:o,skillsRank:d,skillsCutoff:s,skillsData:c,reasons:l})}),O(a,g)}function O(t,n){const o=document.getElementById("eligibleTeams"),s=document.getElementById("ineligibleTeams");o.innerHTML="",s.innerHTML="",t.forEach(e=>{const i=document.createElement("div");i.className="p-4 bg-green-100 border border-green-300 rounded",i.innerHTML=`
      <strong>${e.team.number} - ${e.team.team_name}</strong><br>
      Qualifier Ranking: ${e.qualifierRank} (cutoff: ${e.qualifierCutoff})<br>
      Skills Ranking: ${e.skillsRank} (cutoff: ${e.skillsCutoff})<br>
      Score: ${e.skillsData.score} (Attempts: ${e.skillsData.attempts})
    `,o.appendChild(i)}),n.forEach(e=>{const i=document.createElement("div");i.className="p-4 bg-red-100 border border-red-300 rounded";let a="<ul class='ml-4 text-red-700'>";e.reasons.forEach(g=>{a+=`<li>${g}</li>`}),a+="</ul>",i.innerHTML=`
      <strong>${e.team.number} - ${e.team.team_name}</strong><br>
      Qualifier Ranking: ${e.qualifierRank===-1?"Not ranked":e.qualifierRank} (cutoff: ${e.qualifierCutoff})<br>
      Skills Ranking: ${e.skillsRank===-1?"Not ranked":e.skillsRank} (cutoff: ${e.skillsCutoff})<br>
      ${a}
    `,s.appendChild(i)})}async function Q(){if(!f){alert("Please select an event or lookup an event by SKU.");return}await S(f),L()}document.getElementById("calculateBtn").addEventListener("click",Q);
